Framework(Spring) : Sping AI

# Spring AI

- 애플리케이션에 AI를 쉽게 통합할 수 있도록 설계된 모듈형 프레임워크
    - 애플리케이션 개발의 용이성 향상
    - 기업 데이터 및 API와 다양한 AI 모델을 효율적으로 연결 가능
- 엔터프라이즈 애플리케이션의 데이터와 API를 생성형 API와 연결하는데 최적화된 구조 제공
    - 다양한 AI 서비스 제공자(Open AI, Anthropic, Google, MS 등)을 아우르는 포터블 API 제공
    - chat, text-image 변환, 임베딩 모델 등을 지원
    - 동기식 및 스트리밍 API 지원

가장 큰 목적 :

우리 어플은 데이타, API 만드는데 GPT와 같은 생성형 AI에게 넘겨주고 생성해낸 데이터를 우리 어플리케이션에 가져와서 쓰게하는 것

## Model : 정보를 처리하고 생성하도록 설계된 알고리즘

- 대규모 데이터 세트에서 패턴과 통찰력을 학습하여 추론, 텍스트, 이미지 또는 기타 출력 생성
- GPT : 이미 사전에 잘 훈련되었으므로 범용적인 개발자 도구로 변환 가능

## Prompt : 모델이 사용할 질문이나 명령을 생성하는 과정

## Embeddings

- 고차원의 데이터 (단어, 이미지)를 저차원의 벡터 공간으로 변환하는 과정 : 입력 간의 관계를 포착
    - 벡터는 원래 데이터의 의미적 특성을 보존한다
- 텍스트, 이미지, 또는 비디오의 수치적 표현으로 입력 간의 관계를 나타냄

## Tokens

- AI 모델의 작동 방식의 기본 구성 요소
- 모델은 입력 된 문장(prompt)를 토큰으로 변환해서 처리하고 출력 시 토큰으로 다시 단어로 변환
- 영어에서 하나의 토큰은 대략 75%의 단어에 해당함
- 컨텍스트 윈도우
    - 단일 API 호출에서 처리할 수 있는 텍스트 양으로 이 제한을 초과하는 텍스트는 처리되지 않음

## Structured Output Converter

- AI 모델의 출력은 전통적으로 단순한 java.lang.String
- “JSON”으로 처리해줘 → JSON 형태의 “문자열”로 처리 → JSON으로 변환해줄 도구 필요

## 사용자의 Data와 API를 모델에 전달하기

- Fine Tuning
    - 전통적인 머신 러닝 기법으로 모델을 조정하고 내부 가중치를 변경하는 작업
    - 매우 고난이도 작업이며 리소스 집약도가 높음, 심지어 아예 폐쇄형 모델도 존재 → 처리 불가
- Prompt Stuffing - RAG
    - 사용자의 데이터를 모델에 제공하기 위해 프롬프트 내에 데이터를 삽입하는 방법
- Tool Calling
    - LLM을 외부 시스템의 API에 연결

## RAG (검색 증강 생성)

- 정보 검색과 텍스트 생성을 결합하여 사용자 질문에 대한 최족의 답변 제공
- 정보 검색 : 사용자의 질문에 관련된 정보를 포함하는 문서 검색 - 벡터 데이터베이스 활용
- 텍스트 생성 : 검색된 정보를 바탕으로 새로운 텍스트 생성 - 자연어 처리 기술 활용

## Tool Calling

- LLM은 학습했을 때 까지의 지식으로 동작 - 실시간 정보를 반영하기 어려움
    - LLM을 외부 시스템 API와 연결해서 실시간 데이터를 제공하고 데이터 처리 작업 수행
    - Spring AI에서는 해당 함수를 @Tool 형태로 만들어 프롬프트 옵션으로 전달 가능

## Chat Client API

- AI 모델과 통신을 위한 API
    - AI 모델에 입력으로 전달되는 프롬프트를 구성하는 다양한 메서드 제공
    - 프롬프트는 메시지의 모음으로 구성

![image.png](attachment:1285ad4e-8b91-40f1-9f64-082f711846e5:image.png)

# Advisor API

- 스프링 애플리케이션에서 AI 기반의 상호 작용을 가로채고 수정하고 향상시킬 수 있는 방법
    - 반복되는 생성 AI 패턴에 대한 캡슐화
    - LLM과 주고받는 데이터의 변환
    - 다양한 모델 및 사용 사례에 걸쳐 이식성 제공

핵심 컴포넌트

- AdvisedRequest : 프롬프트 요청 객체
- AdvisedResponse : 채팅 완료 응답을 위한 객체
